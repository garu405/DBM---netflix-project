from tkinter import *
import random
import mysql.connector
import pprint
from tkinter import ttk

def connect():
    global db
    db = mysql.connector.connect(host='127.0.0.1', port=3006, user='', passwd='', database='sakila', auth_plugin='mysql_native_password', charset='utf8')
    return db

front_end_window=Tk()
front_end_window.title("Return Rental")
front_end_window.geometry("900x600")

#creating a cursor and initializing it
#my_cursor = db.cursor()


#Create Table

#update list
def update_list():
    sql_command = ""

def display(query):
    x = connect()
    c = x.cursor()
    c.execute(query[0])
    result = c.fetchall()

    # Label in top row
    t=1
    columns = c.column_names
    print(columns)

    label = Label(middle_frame, text=query[1])
    label.grid(row=0, column=2)
    #create column names
    for i in range(len(columns)):
        e = Entry(middle_frame, width=20, fg='blue')
        e.grid(row=1, column=i)
        e.insert(END, columns[i])

    for i in range(len(result)):
        for j in range(len(columns)):
            e = Entry(middle_frame, width=20, fg='blue')
            e.grid(row=i+2, column=j)
            e.insert(END, result[i][j])
    x.close()

#please wite the query here
list_movies_query=[""]
list_tv_shows_query=[""]
    
def search_now():
    selected = drop.get()
    if selected == "Search by...":
        return
    if selected == "Genre":
        return
    if selected == "Title":
        return
    if selected == "Release Year":
        return
    if selected == "Movie":
        return
    if selected == "TV Show":
        return

    searched = search_box.get()
    sql = "SELECT * FROM "" WHERE "" = %s"
    name = (searched, )
    result = my_cursor.execute(sql, title)
    result = my_cursor.fetchall()



var1 = StringVar()
var2 = StringVar()

rentals_query=["select film_id as FILM_ID, title as TITLE, rental_rate as RATE from film limit 15;", "Viewing Rentals"]



top_frame = Frame(front_end_window, bd=5)
top_frame.place(relwidth=1, relheight= 0.20, relx=0.5, rely=0.1, anchor=CENTER)
top_frame.columnconfigure(0, weight=3)
label=Label(top_frame, text="Enter Genre", font="Arial 15 bold", fg='blue3')
label.grid(row=0,column=3, sticky=N)

#entry box to search
inputbox = Entry(top_frame, width=50)
inputbox.grid(row=1,column=4, sticky=W)

search_button = Button(top_frame, text="Search", command=search_now)
search_button.grid(row=1, column=5, padx=10)

#drop box
drop = ttk.Combobox(top_frame, value=["Search by....", "Genre", "Title", "Release Year", "Movie", "TV Show"])
drop.current(0)
drop.grid(row=1, column=3)

#checkbox
movie = Checkbutton(top_frame, text="Movie", variable=var1)
movie.deselect()
movie.grid(row=1, column=1, sticky=W)
tv_show = Checkbutton(top_frame, text="TV Shows", variable=var2)
tv_show.deselect()



tv_show.grid(row=1, column=2, sticky=W)
types = Label(top_frame, text="Type:")
types.grid(row=1, column=0, sticky=W)

#update
update_button = Button(top_frame, text="Update List", command=update_list)
update_button.grid(row=2, column=1, padx=10, pady=10, sticky=W)

#list all movie
movie_list_button = Button(top_frame, text="Show All Movies", command=lambda: display(list_movies_query))
movie_list_button.grid(row=2, column=2, padx=10, pady=10, sticky=W)

tvshow_list_button = Button(top_frame, text="Show All TV Shows", command=lambda: display(list_tv_shows_query))
tvshow_list_button.grid(row=2, column=3, padx=10, pady=10, sticky=W)

middle_frame = Frame(front_end_window, bg="#80c1ff", bd=5)
middle_frame.place(relwidth=1, relheight= 0.70, relx=0.5, rely=0.20, anchor=N)


"""""
r_bottom_frame = Frame(front_end_window, bd=5)
r_bottom_frame.place(relwidth=1, relheight= 0.10,relx=0.5, rely=1, anchor=S)


#optional

clear_button=Button(r_bottom_frame, text="Clear", padx=20, command=lambda:clear_box())
clear_button.pack(side=RIGHT)
"""




front_end_window.mainloop()
